<!DOCTYPE html>
<html lang="ru">
<head>
  <%- include('../../partials/admin-head', { title: 'Админка' }) %>
</head>
<body>
    <div class="admin-container">
        <%- include('../../partials/admin-aside') %>
        <main class="content">
            <h1><%= title %></h1>
            <form method="POST" action="<%= formAction %>">
                <div class="form-group">
                    <label>Название</label>
                    <input type="text" name="name" class="form-control"
                        value="<%= product ? product.name : '' %>" required>
                </div>

                <div class="form-group">
                    <label>Бренд</label>
                    <input type="text" name="brand" class="form-control"
                        value="<%= product ? product.brand : '' %>">
                </div>

                <div class="form-group">
                    <label>Тип</label>
                    <input type="text" name="type" class="form-control"
                        value="<%= product ? product.type : '' %>">
                </div>

                <div class="form-group">
                    <label>Категория</label>
                    <input type="text" name="category" class="form-control"
                        value="<%= product ? product.category : '' %>">
                </div>

                <div class="form-group">
                    <label>Описание</label>
                    <textarea name="description" class="form-control"><%= product ? product.description : '' %></textarea>
                </div>

                <div class="form-group">
                    <label>Цена</label>
                    <input type="number" step="0.01" name="price" class="form-control"
                        value="<%= product ? product.price : '' %>" required>
                </div>

                <div class="form-group">
                    <label>Количество на складе</label>
                    <input type="number" name="stock_quantity" class="form-control"
                        value="<%= product ? product.stock_quantity : '0' %>" required>
                </div>

                <div class="form-group">
                    <label>Возрастная группа</label>
                    <select name="age_group" class="form-control" required>
                        <option value="0+" <%= product && product.age_group === '0+' ? 'selected' : '' %>>0+</option>
                        <option value="6+" <%= product && product.age_group === '6+' ? 'selected' : '' %>>6+</option>
                        <option value="12+" <%= product && product.age_group === '12+' ? 'selected' : '' %>>12+</option>
                        <option value="18+" <%= product && product.age_group === '18+' ? 'selected' : '' %>>18+</option>
                        <option value="30+" <%= product && product.age_group === '30+' ? 'selected' : '' %>>30+</option>
                        <option value="60+" <%= product && product.age_group === '60+' ? 'selected' : '' %>>60+</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Объем (мл)</label>
                    <input type="number" name="volume" class="form-control"
                        value="<%= product ? product.volume : '' %>">
                </div>

                <div class="form-group">
                    <label>Количество в наборе</label>
                    <input type="number" name="items_in_set" class="form-control"
                        value="<%= product ? product.items_in_set : '1' %>">
                </div>

                <div class="form-group">
                    <label>Гипоаллергенно</label>
                    <select name="is_hypoallergenic" class="form-control" required>
                        <option value="1" <%= product && product.is_hypoallergenic ? 'selected' : '' %>>Да</option>
                        <option value="0" <%= product && !product.is_hypoallergenic ? 'selected' : '' %>>Нет</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Применение</label>
                    <textarea name="application" class="form-control"><%= product ? product.application : '' %></textarea>
                </div>

                <div class="form-group">
                    <label>Состав</label>
                    <textarea name="composition" class="form-control"><%= product ? product.composition : '' %></textarea>
                </div>

                <div class="form-group">
                    <label>Противопоказания</label>
                    <textarea name="contraindications" class="form-control"><%= product ? product.contraindications : '' %></textarea>
                </div>

                <div class="form-group">
                    <label>Ссылка на изображение</label>
                    <input type="url" name="image_url" class="form-control"
                        pattern=".+\.(jpg|jpeg|png|gif|webp)$"
                        title="Введите URL изображения (jpg, jpeg, png, gif или webp)"
                        value="<%= product ? product.image_url : '' %>">
                </div>

                <% if (isEdit) { %>
                    <input type="hidden" name="_method" value="PUT">
                <% } %>

                <button type="submit" class="btn btn-primary">
                    <%= isEdit ? 'Обновить' : 'Добавить' %>
                </button>

                <% if (isEdit) { %>
                    <a href="/admin/products" class="btn btn-secondary">Отмена</a>
                <% } %>
            </form>
        </main>
    </div>
</body>
</html>